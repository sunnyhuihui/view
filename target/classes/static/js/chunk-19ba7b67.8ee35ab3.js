(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ba7b67"],{"0c99":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login",attrs:{id:"register-particels"}},[t("div",{staticClass:"login-con"},[t("Card",{attrs:{icon:"log-in",title:"欢迎注册",bordered:!1}},[t("div",{staticClass:"form-con"},[t("register-form"),t("p",{staticClass:"login-tip"},[e._v("已有账户？>\n          "),t("router-link",{attrs:{to:"/login"}},[e._v(" 登录")])],1)],1)])],1)])},s=[],n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("Form",{ref:"registerForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleSubmit(r)}}},[t("FormItem",{attrs:{prop:"userName"}},[t("Input",{attrs:{placeholder:"请输入手机号码",type:"tel"},model:{value:e.form.userName,callback:function(r){e.$set(e.form,"userName",r)},expression:"form.userName"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),t("FormItem",{attrs:{prop:"repassword"}},[t("Input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.form.repassword,callback:function(r){e.$set(e.form,"repassword",r)},expression:"form.repassword"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),t("FormItem",{attrs:{prop:"code"}},[t("Input",{attrs:{placeholder:"请输入验证码"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[t("Icon",{attrs:{type:"ios-closed-captioning",size:14}})],1),t("Button",{attrs:{slot:"append",loading:e.loading,disabled:e.codeSend},on:{click:e.getCode},slot:"append"},[e.loading?t("span",[e._v("Loading...")]):t("span",[e._v(e._s(e.codeSend?"已发送":"获取验证码"))])])],1)],1),t("FormItem",[t("Button",{attrs:{type:"primary",long:""},on:{click:e.handleSubmit}},[e._v("注册")])],1)],1)},a=[],c={name:"RegisterForm",data:function(){var e=this,r=function(r,t,o){""===t?(e.phoneCheck=!1,o(new Error("手机号码不能为空"))):/^1\d{10}$/.test(t)?(e.phoneCheck=!0,o()):(e.phoneCheck=!1,o(new Error("输入的手机号码格式不正确")))},t=function(r,t,o){""===t?o(new Error("密码不能为空")):(""!==e.form.repassword&&e.$refs.registerForm.validateField("repassword"),o())},o=function(r,t,o){""===t?o(new Error("确认密码不能为空")):t!==e.form.password?o(new Error("两次输入的密码不一致")):o()},s=function(e,r,t){""===r?t(new Error("验证码不能为空")):/\d/.test(r)?t():t(new Error("输入的验证码格式不对"))};return{form:{userName:"",password:"",repassword:"",code:""},rules:{userName:[{validator:r,trigger:"blur"}],password:[{validator:t,trigger:"blur"}],repassword:[{validator:o,trigger:"blur"}],code:[{validator:s,trigger:"blur"}]},loading:!1,phoneCheck:!1,codeSend:!1}},methods:{handleSubmit:function(){var e=this;this.$refs.registerForm.validate(function(r){if(r){var t=new FormData;t.append("phone",e.form.userName),t.append("password",e.form.repassword),t.append("code",e.form.code),e.$http.fetch("/api/user/register",{method:"POST",body:t}).then(function(e){return e.json()}).then(function(r){0===r.code?e.$Message.success({content:"注册成功",closable:!0,onClose:function(){e.$router.push("/login")}}):e.$Message.error({content:r.msg,closable:!0})}).catch(function(r){e.$Message.error({content:r,closable:!0})})}})},getCode:function(){var e=this;if(this.phoneCheck){this.loading=!0;var r=new FormData;r.append("phone",this.form.userName),this.$http.fetch("/api/user/registerCode",{method:"POST",body:r}).then(function(e){return e.json()}).then(function(r){0===r.code?(e.loading=!1,e.codeSend=!0):(e.loading=!1,e.codeSend=!1,e.$Message.error({content:r.msg,closable:!0}))}).catch(function(r){e.codeSend=!1,e.$Message.error({content:r,closable:!0})})}else this.$Message.error({content:"请先输入正确的手机号码",closable:!0})}}},i=c,d=t("17cc"),l=Object(d["a"])(i,n,a,!1,null,"883bca8e",null),p=l.exports,u=(t("5e73"),t("16c7")),m={name:"Register",components:{RegisterForm:p},mounted:function(){particlesJS("register-particels",u)}},f=m,h=(t("5631"),Object(d["a"])(f,o,s,!1,null,"22b48678",null));r["default"]=h.exports},"2c21":function(e,r,t){},5631:function(e,r,t){"use strict";var o=t("2c21"),s=t.n(o);s.a}}]);